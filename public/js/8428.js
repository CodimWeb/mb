"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8428],{762:(e,t,n)=>{n.d(t,{Z:()=>r});const r="/images/edit-icon.svg?44d43abec10e21e5bd93a6bc6b422f72"},8428:(e,t,n)=>{n.r(t),n.d(t,{default:()=>O});var r=n(1385),a=n(762),o={class:"admin-dashboard__100 admin-menu"},l=(0,r.createElementVNode)("div",{class:"admin-dashboard__heading"},[(0,r.createElementVNode)("h1",null,"Управление меню")],-1),c={key:0,class:"admin-menu__create-box"},u={class:"aui-col-3"},i={class:"form-group"},s=(0,r.createElementVNode)("p",null,"Названние меню",-1),d={class:"form-group"},m=(0,r.createElementVNode)("p",null,"Slug",-1),p=(0,r.createElementVNode)("div",{class:"form-group"},[(0,r.createElementVNode)("p",null," "),(0,r.createElementVNode)("button",{type:"submit",class:"aui-button aui-button__100"},"Создать")],-1),f={key:1,class:"admin-menu__create-box"},v=(0,r.createElementVNode)("h2",null,"Меню успешно создано!",-1),g={class:"admin-table"},h=(0,r.createElementVNode)("thead",null,[(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("td",null,"ID"),(0,r.createElementVNode)("td",null,"Название"),(0,r.createElementVNode)("td",null,"Slug"),(0,r.createElementVNode)("td")])],-1),V=["textContent"],E=["textContent"],N=["textContent"],b={class:"aui-button-group"},k=(0,r.createTextVNode)(" Изменить пункты меню "),x=(0,r.createElementVNode)("img",{src:a.Z,alt:"Редактировать"},null,-1),_=(0,r.createTextVNode)(" Редактировать "),w=["onClick"];var C=n(7757),B=n.n(C);function y(e,t,n,r,a,o,l){try{var c=e[o](l),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,a)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function l(e){y(o,r,a,l,c,"next",e)}function c(e){y(o,r,a,l,c,"throw",e)}l(void 0)}))}}const L={data:function(){return{menuList:[],create_menu:{title:"",slug:""},created:!1}},mounted:function(){var e=this;return M(B().mark((function t(){var n,r;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/admin/menu-list");case 2:n=t.sent,r=n.data,e.menuList=r;case 5:case"end":return t.stop()}}),t)})))()},methods:{deleteMenu:function(e){var t=this;return M(B().mark((function n(){var r,a;return B().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.next=3,axios.post("/api/admin/menu-list/delete/"+e);case 3:r=n.sent,a=r.data,t.menuList=a;case 6:case"end":return n.stop()}}),n)})))()},createMenu:function(){var e=this;return M(B().mark((function t(){var n,r;return B().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,axios.post("/api/admin/menu-list/create",e.create_menu);case 3:n=t.sent,r=n.data,e.menuList=r,e.created=!0,e.create_menu.title="",e.create_menu.slug="",e.$toast.success("Меню успешно создано",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),e.$toast.error("Некорректно заполнены поля",{position:"top-right",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},getForm:function(){this.created=!this.created}}};const O=(0,n(3744).Z)(L,[["render",function(e,t,n,a,C,B){var y=(0,r.resolveComponent)("router-link");return(0,r.openBlock)(),(0,r.createElementBlock)("div",o,[l,C.created?((0,r.openBlock)(),(0,r.createElementBlock)("div",f,[v,(0,r.createElementVNode)("button",{class:"aui-button admin-menu__button",onClick:t[3]||(t[3]=function(){return B.getForm&&B.getForm.apply(B,arguments)})},"Создать еще одно")])):((0,r.openBlock)(),(0,r.createElementBlock)("div",c,[(0,r.createElementVNode)("form",{onSubmit:t[2]||(t[2]=(0,r.withModifiers)((function(){return B.createMenu&&B.createMenu.apply(B,arguments)}),["prevent"]))},[(0,r.createElementVNode)("div",u,[(0,r.createElementVNode)("div",i,[s,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",class:"aui-input",placeholder:"Название меню","onUpdate:modelValue":t[0]||(t[0]=function(e){return C.create_menu.title=e})},null,512),[[r.vModelText,C.create_menu.title]])]),(0,r.createElementVNode)("div",d,[m,(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text",class:"aui-input",placeholder:"Slug","onUpdate:modelValue":t[1]||(t[1]=function(e){return C.create_menu.slug=e})},null,512),[[r.vModelText,C.create_menu.slug]])]),p])],32)])),(0,r.createElementVNode)("table",g,[h,(0,r.createElementVNode)("tbody",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(C.menuList,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("tr",{key:e.id},[(0,r.createElementVNode)("td",{textContent:(0,r.toDisplayString)(e.id)},null,8,V),(0,r.createElementVNode)("td",{textContent:(0,r.toDisplayString)(e.title)},null,8,E),(0,r.createElementVNode)("td",{textContent:(0,r.toDisplayString)(e.slug)},null,8,N),(0,r.createElementVNode)("td",null,[(0,r.createElementVNode)("div",b,[(0,r.createVNode)(y,{to:{name:"admin-menu-links-edit",params:{id:e.id}},class:"aui-btn-edit"},{default:(0,r.withCtx)((function(){return[k]})),_:2},1032,["to"]),(0,r.createVNode)(y,{to:{name:"admin-menu-edit",params:{id:e.id}},class:"aui-btn-edit"},{default:(0,r.withCtx)((function(){return[x,_]})),_:2},1032,["to"]),(0,r.createElementVNode)("a",{href:"#",onClick:(0,r.withModifiers)((function(t){return B.deleteMenu(e.id)}),["prevent"]),class:"aui-color-danger"}," Удалить ",8,w)])])])})),128))])])])}]])}}]);