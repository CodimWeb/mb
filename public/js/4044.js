"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4044],{2838:(e,t,n)=>{n.d(t,{Z:()=>a});const a="/images/maran-icon.svg?99167ba1b33fbab8cefc527e9d367dba"},4044:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ce});var a=n(1385),o=n(2838),r={class:"da-dashboard-home"},c={class:"da-widget da-dashboard-home__wallet"},s={class:"da-dashboard-home__wallet-token"},d=(0,a.createElementVNode)("img",{src:o.Z,class:"da-dashboard-home__maran-icon",alt:"Maran"},null,-1),i={class:"da-dashboard-home__text-big"},l=(0,a.createElementVNode)("div",{class:"da-dashboard-home__text-small"},"Текущий баланс",-1),u={class:"da-dashboard-home__wallet-actions"},p=[(0,a.createElementVNode)("div",{class:"da-dashboard-home__wallet-item-icon da-dashboard-home__wallet-item-icon-up"},null,-1),(0,a.createElementVNode)("span",{class:"da-dashboard-home__wallet-item-text"},"Пополнить",-1)],m=[(0,a.createElementVNode)("div",{class:"da-dashboard-home__wallet-item-icon da-dashboard-home__wallet-item-icon-draft"},null,-1),(0,a.createElementVNode)("span",{class:"da-dashboard-home__wallet-item-text"},"Вывод средств",-1)],w=(0,a.createElementVNode)("div",{class:"da-dashboard-home__wallet-item-icon da-dashboard-home__wallet-item-icon-details"},null,-1),h=(0,a.createElementVNode)("span",{class:"da-dashboard-home__wallet-item-text"},"Детализация",-1);var _=n(8637),f={key:0,class:"adding-funds-desktop"},g=(0,a.createElementVNode)("div",{class:"adding-funds-desktop__back"},null,-1),y={class:"adding-funds-desktop__window"},b=(0,a.createElementVNode)("span",{class:"aui-heading_2 adding-funds-desktop__title"},"Пополнить баланс",-1),v={class:"adding-funds-desktop__steps-text"},k={class:"adding-funds-desktop__group"},V=(0,a.createElementVNode)("p",null,"Выберите валюту пополнения",-1),N=["value"],E={class:"adding-funds-desktop__row"},O={class:"adding-funds-desktop__group"},S=(0,a.createElementVNode)("p",null,"Сумма пополнения:",-1),x={class:"adding-funds-desktop__group"},W=(0,a.createElementVNode)("p",null,"Вы получите:",-1),C=(0,a.createElementVNode)("button",{class:"button button__standard adding-funds-desktop__button",type:"submit"},"Далее ",-1),j={class:"adding-funds-desktop__group"},D=["placeholder"],P=(0,a.createElementVNode)("button",{class:"button button__standard adding-funds-desktop__button",type:"submit"},"Далее ",-1),B={key:2,class:"adding-funds-desktop__step_3"},M=(0,a.createElementVNode)("img",{src:o.Z,class:"adding-funds-desktop__transaction-send",alt:"Maran"},null,-1),F={class:"adding-funds-desktop__group"},T={class:"adding-funds-desktop__box"},A=(0,a.createTextVNode)(".");var L=n(7757),U=n.n(L);function Z(e,t,n,a,o,r,c){try{var s=e[r](c),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(a,o)}const q={props:["windowStatus"],data:function(){return{step:1,currency:"",currency_count:0,currency_price:0,currency_wallet:"",maran_count:0,coinsList:[],maran_price:0,system_wallet:"",payment_reference:""}},methods:{step_next:function(){if(0===this.currency_count)return!1;this.step+=1,3===this.step&&this.getSystemWallet(),3===this.step&&this.registerTransaction()},close:function(){this.$emit("addFundsWindow")},getMaranCourse:function(){var e=this;axios.get("/api/currencies/MARAN").then((function(t){200===t.status&&(e.maran_price=t.data.price)})).catch((function(e){console.log(e)}))},getCurrencyPrice:function(){var e=this;axios.get("/api/currencies/"+this.currency).then((function(t){200===t.status&&(e.currency_price=t.data.price,e.calculateCurrencyCount())})).catch((function(e){console.log(e)}))},getCoinsList:function(){var e=this;axios.get("/api/currencies").then((function(t){200===t.status&&(e.coinsList=t.data)})).catch((function(e){console.log(e)}))},calculateCurrencyCount:function(){this.maran_count=(this.currency_count*this.currency_price/this.maran_price).toFixed(2)},getSystemWallet:function(){var e=this;axios.get("/api/systemwallets/"+this.currency).then((function(t){200===t.status&&(e.system_wallet=t.data.wallet)})).catch((function(e){console.log(e)}))},registerTransaction:function(){var e,t=this;return(e=U().mark((function e(){return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.post("/api/transactions/add",{maran_count:t.maran_count,coin_count:t.currency_count,user_wallet:t.currency_wallet}).then((function(e){200===e.status&&(t.payment_reference=e.data.id,axios.post("/api/adding-funds/new",{unit:t.currency,address:t.currency_wallet,payment_reference:t.payment_reference,amount:t.currency_count}).then((function(e){200===e.status&&console.log("success")})).catch((function(e){console.log(e)})))})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function c(e){Z(r,a,o,c,s,"next",e)}function s(e){Z(r,a,o,c,s,"throw",e)}c(void 0)}))})()}},mounted:function(){this.getCoinsList(),this.getMaranCourse()}};var R=n(3744);const $=(0,R.Z)(q,[["render",function(e,t,n,o,r,c){return n.windowStatus?((0,a.openBlock)(),(0,a.createElementBlock)("div",f,[g,(0,a.createElementVNode)("div",y,[(0,a.createElementVNode)("div",{class:"adding-funds-desktop__close",onClick:t[0]||(t[0]=function(){return c.close&&c.close.apply(c,arguments)})}),b,(0,a.createElementVNode)("span",v,"Шаг "+(0,a.toDisplayString)(r.step)+" / 3",1),1===r.step?((0,a.openBlock)(),(0,a.createElementBlock)("form",{key:0,class:"adding-funds-desktop__step_1",onSubmit:t[6]||(t[6]=(0,a.withModifiers)((function(){return c.step_next&&c.step_next.apply(c,arguments)}),["prevent"]))},[(0,a.createElementVNode)("div",k,[V,(0,a.withDirectives)((0,a.createElementVNode)("select",{class:"ui-input",name:"currency","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.currency=e}),onChange:t[2]||(t[2]=function(){return c.getCurrencyPrice&&c.getCurrencyPrice.apply(c,arguments)}),required:""},[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(r.coinsList,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("option",{value:e.code},(0,a.toDisplayString)(e.code+" ("+e.name+")"),9,N)})),256))],544),[[a.vModelSelect,r.currency]])]),(0,a.createElementVNode)("div",E,[(0,a.createElementVNode)("div",O,[S,(0,a.withDirectives)((0,a.createElementVNode)("input",{class:"ui-input",type:"number",min:"0",step:"0.0001",name:"wallet",placeholder:"Сумма пополнения","onUpdate:modelValue":t[3]||(t[3]=function(e){return r.currency_count=e}),onKeyup:t[4]||(t[4]=function(e){return c.calculateCurrencyCount()}),required:""},null,544),[[a.vModelText,r.currency_count]])]),(0,a.createElementVNode)("div",x,[W,(0,a.withDirectives)((0,a.createElementVNode)("input",{class:"ui-input",type:"text",name:"maran_count",placeholder:"Сколько получите","onUpdate:modelValue":t[5]||(t[5]=function(e){return r.maran_count=e}),disabled:""},null,512),[[a.vModelText,r.maran_count]])])]),C],32)):(0,a.createCommentVNode)("",!0),2===r.step?((0,a.openBlock)(),(0,a.createElementBlock)("form",{key:1,class:"adding-funds-desktop__step_2",onSubmit:t[8]||(t[8]=(0,a.withModifiers)((function(){return c.step_next&&c.step_next.apply(c,arguments)}),["prevent"]))},[(0,a.createElementVNode)("div",j,[(0,a.createElementVNode)("p",null,"Введите кошелек "+(0,a.toDisplayString)(r.currency)+", с которого будете пополнять баланс:",1),(0,a.withDirectives)((0,a.createElementVNode)("input",{class:"ui-input",type:"text",placeholder:"Ваш кошелек"+r.currency,"onUpdate:modelValue":t[7]||(t[7]=function(e){return r.currency_wallet=e}),required:""},null,8,D),[[a.vModelText,r.currency_wallet]])]),P],32)):(0,a.createCommentVNode)("",!0),3===r.step?((0,a.openBlock)(),(0,a.createElementBlock)("div",B,[M,(0,a.createElementVNode)("div",F,[(0,a.createElementVNode)("p",null,[(0,a.createTextVNode)("Для пополнения баланса на "+(0,a.toDisplayString)(r.maran_count)+" Maran, переведите "+(0,a.toDisplayString)(r.currency_count+" "+r.currency)+" с вашего кошелька "+(0,a.toDisplayString)(r.currency_wallet)+" на кошелек ",1),(0,a.createElementVNode)("span",T,(0,a.toDisplayString)(r.system_wallet),1),A]),(0,a.createElementVNode)("button",{class:"button button__standard adding-funds-desktop__button",type:"button",onClick:t[9]||(t[9]=function(){return c.close&&c.close.apply(c,arguments)})},"Готово")])])):(0,a.createCommentVNode)("",!0)])])):(0,a.createCommentVNode)("",!0)}]]);var K={key:0,class:"withdraw-funds-desktop"},z=(0,a.createElementVNode)("div",{class:"withdraw-funds-desktop__back"},null,-1),G={class:"withdraw-funds-desktop__window"},H=(0,a.createElementVNode)("span",{class:"aui-heading_2 witchdraw-funds-desktop__heading"},"Вывод средств",-1),I={class:"withdraw-funds-desktop__group"},J=(0,a.createElementVNode)("p",null,"Сумма для вывода:",-1),Q={class:"withdraw-funds-desktop__group"},X=(0,a.createElementVNode)("p",null,"Кошелек для вывода (MARAN):",-1),Y=(0,a.createElementVNode)("button",{type:"submit",class:"button button__standard withdraw-funds-desktop__button"},"Вывести средства",-1);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne={props:["witchdrawWindowStatus"],data:function(){return{amount:0,wallet:""}},methods:{close:function(){this.$emit("toggleWitchdrawWindow")},createOrder:function(){if(0===this.amount)return!1;axios.post("/api/witchdrawts/add",{amount:this.amount,wallet:this.wallet}).then((function(e){200===e.status&&console.log("success")})).catch((function(e){console.log(e)}))}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,_.Se)(["getBalance"]))};function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const re={components:{AddingFundsWindowDesktop:$,WithdrawFundsWindowDesktop:(0,R.Z)(ne,[["render",function(e,t,n,o,r,c){return n.witchdrawWindowStatus?((0,a.openBlock)(),(0,a.createElementBlock)("div",K,[z,(0,a.createElementVNode)("div",G,[(0,a.createElementVNode)("form",{onSubmit:t[3]||(t[3]=(0,a.withModifiers)((function(e){return c.createOrder()}),["prevent"]))},[(0,a.createElementVNode)("div",{class:"withdraw-funds-desktop__close",onClick:t[0]||(t[0]=function(){return c.close&&c.close.apply(c,arguments)})}),H,(0,a.createElementVNode)("div",I,[J,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"number",class:"ui-input",placeholder:"Сумма для вывода","onUpdate:modelValue":t[1]||(t[1]=function(e){return r.amount=e}),min:"0",max:"getBalance",step:"0.01",required:""},null,512),[[a.vModelText,r.amount]])]),(0,a.createElementVNode)("div",Q,[X,(0,a.withDirectives)((0,a.createElementVNode)("input",{type:"text",class:"ui-input",placeholder:"Сумма для вывода","onUpdate:modelValue":t[2]||(t[2]=function(e){return r.wallet=e})},null,512),[[a.vModelText,r.wallet]])]),Y],32)])])):(0,a.createCommentVNode)("",!0)}]])},data:function(){return{windowStatus:!1,witchdrawWindowStatus:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,_.Se)(["getBalance"])),mounted:function(){this.$store.dispatch("fetchBalance")},methods:{addFundsWindow:function(){this.windowStatus=!this.windowStatus},toggleWitchdrawWindow:function(){this.witchdrawWindowStatus=!this.witchdrawWindowStatus}}},ce=(0,R.Z)(re,[["render",function(e,t,n,o,_,f){var g=(0,a.resolveComponent)("router-link"),y=(0,a.resolveComponent)("adding-funds-window-desktop"),b=(0,a.resolveComponent)("withdraw-funds-window-desktop");return(0,a.openBlock)(),(0,a.createElementBlock)("div",r,[(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("div",s,[d,(0,a.createElementVNode)("span",i,(0,a.toDisplayString)(e.getBalance?e.getBalance.balance+" MARAN":""),1),l]),(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("div",{class:"da-dashboard-home__wallet-item",onClick:t[0]||(t[0]=function(){return f.addFundsWindow&&f.addFundsWindow.apply(f,arguments)})},p),(0,a.createElementVNode)("div",{class:"da-dashboard-home__wallet-item",onClick:t[1]||(t[1]=function(){return f.toggleWitchdrawWindow&&f.toggleWitchdrawWindow.apply(f,arguments)})},m),(0,a.createVNode)(g,{to:{name:"dashboard-adaptive-transactions-history"},class:"da-dashboard-home__wallet-item"},{default:(0,a.withCtx)((function(){return[w,h]})),_:1})])]),(0,a.createVNode)(y,{windowStatus:_.windowStatus,onAddFundsWindow:f.addFundsWindow},null,8,["windowStatus","onAddFundsWindow"]),(0,a.createVNode)(b,{witchdrawWindowStatus:_.witchdrawWindowStatus,onToggleWitchdrawWindow:f.toggleWitchdrawWindow},null,8,["witchdrawWindowStatus","onToggleWitchdrawWindow"])])}]])}}]);