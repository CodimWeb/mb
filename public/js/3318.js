"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3318],{3318:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var o=r(1385),a={key:0,class:"admin-dashboard__100 admin-category-edit"},n=(0,o.createElementVNode)("div",{class:"admin-dashboard__heading"},[(0,o.createElementVNode)("h1",null,"Редактирование категории")],-1),s={key:0,class:"aui-errors"},c={key:0},i={key:1},l={class:"aui-form-group"},u={class:"aui-form-group"},d={class:"aui-form-group"},p=(0,o.createElementVNode)("label",{for:"category-disabled"},"Включить категорию",-1),m=(0,o.createElementVNode)("button",{type:"submit",class:"aui-button"},"Сохранить",-1);var g=r(7757),v=r.n(g);function h(e,t,r,o,a,n,s){try{var c=e[n](s),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(o,a)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var n=e.apply(t,r);function s(e){h(n,o,a,s,c,"next",e)}function c(e){h(n,o,a,s,c,"throw",e)}s(void 0)}))}}const f={data:function(){return{category:{id:null,title:"",description:"",slug:"",active:!0},errors:{message:"",list:[]}}},mounted:function(){var e=this;return y(v().mark((function t(){var r,o;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/admin/category/get/"+e.$route.params.id);case 2:r=t.sent,o=r.data,e.category=o,e.category.active=1===e.category.active;case 6:case"end":return t.stop()}}),t)})))()},methods:{save:function(){var e=this;return y(v().mark((function t(){var r,o,a;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.errors.list=[],t.prev=1,t.next=4,axios.post("/api/admin/category/edit/"+e.$route.params.id,e.category);case 4:r=t.sent,e.category=r.data,e.$toast.success("Категория успешно сохранена",{position:"bottom",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1}),e.$router.push({path:"/admin/categories"}),t.next=17;break;case 10:t.prev=10,t.t0=t.catch(1),o=t.t0.response.data.errors,a=t.t0.response.data.message,o&&(e.errors.list=o),a&&a.length&&(e.errors.message=a),e.$toast.error("Ошибка при редактировании категории",{position:"bottom",timeout:3e3,closeOnClick:!0,pauseOnFocusLoss:!0,pauseOnHover:!0,draggable:!0,draggablePercent:.6,showCloseButtonOnHover:!1,hideProgressBar:!1,closeButton:"button",icon:!0,rtl:!1});case 17:case"end":return t.stop()}}),t,null,[[1,10]])})))()}}};const k=(0,r(3744).Z)(f,[["render",function(e,t,r,g,v,h){return v.category?((0,o.openBlock)(),(0,o.createElementBlock)("div",a,[n,v.errors.message.length||v.errors.list.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",s,[v.errors.message.length?((0,o.openBlock)(),(0,o.createElementBlock)("p",c,(0,o.toDisplayString)(v.errors.message),1)):(0,o.createCommentVNode)("",!0),v.errors.list?((0,o.openBlock)(),(0,o.createElementBlock)("ul",i,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(v.errors.list,(function(e){return(0,o.openBlock)(),(0,o.createElementBlock)("li",null,(0,o.toDisplayString)(e[0]),1)})),256))])):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("form",{method:"post",onSubmit:t[3]||(t[3]=(0,o.withModifiers)((function(){return h.save&&h.save.apply(h,arguments)}),["prevent"]))},[(0,o.createElementVNode)("div",l,[(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:"aui-input","onUpdate:modelValue":t[0]||(t[0]=function(e){return v.category.title=e}),placeholder:"Название категории"},null,512),[[o.vModelText,v.category.title]])]),(0,o.createElementVNode)("div",u,[(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"text",class:"aui-input","onUpdate:modelValue":t[1]||(t[1]=function(e){return v.category.description=e}),placeholder:"Описание категории"},null,512),[[o.vModelText,v.category.description]])]),(0,o.createElementVNode)("div",d,[(0,o.withDirectives)((0,o.createElementVNode)("input",{type:"checkbox",class:"aui-checkbox",id:"category-disabled","onUpdate:modelValue":t[2]||(t[2]=function(e){return v.category.active=e})},null,512),[[o.vModelCheckbox,v.category.active]]),p]),m],32)])):(0,o.createCommentVNode)("",!0)}]])}}]);